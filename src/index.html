<!DOCTYPE html>
<html>

<head>
  <meta charset="EUC-KR" />
  <title></title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />

  <script src="./js/jquery-3.1.1.min.js"></script>
  <script src="./js/jquery.panzoom.js"></script>

  <link rel="stylesheet" href="./css/bootstrap-dialog.css" />
  <script src="./js/bootstrap.min.js"></script>
  <script src="./js/bootstrap-dialog.js"></script>

  <script src="./js/svg.js"></script>
  <script src="./js/svg.filter.js"></script>

  <script src="./js/lodash.min.js"></script>

  <script src="./maps/upsas/upsasConfig.js"></script>
  <script src="./maps/upsas/outputMap.js"></script>
  <script src="./js/contents/drawSvg.js"></script>
</head>

<body>
  <!-- 메인 -->
  <div class="jumbotron text-center jumbotron_line">
    <div class="row row_st_line min_h_780">
      <div id="zoom" style="display: flex; justify-content: center;">
        <button id="zoom-in" class="btn btn-default btn-sm" style="margin-right: 5px">
          <span class="glyphicon glyphicon-zoom-in"></span> Zoom-in
        </button>
        <button id="zoom-out" class="btn btn-default btn-sm" style="margin-right: 5px">
          <span class="glyphicon glyphicon-zoom-out"></span> Zoom-out
        </button>
        <button id="reset" class="btn btn-default btn-sm" style="margin-right: 5px">
          <span class="glyphicon glyphicon-refresh"></span> Reset
        </button>
      </div>
      <!-- canvas -->
      <div>
        <div id="canvas" style=" display: flex; justify-content: center; margin: 5px;"></div>
      </div>
    </div>
  </div>

  <script>
    drawSvgBackground('canvas');

    // size 재설정
    var svgMap = SVG.get('svgCanvas');
    var canvas = document.getElementById('canvas');
    canvas.style.width = svgMap.node.width.baseVal.value + 'px';
    canvas.style.height = svgMap.node.height.baseVal.value + 'px';

    // panzoom 기능
    var $panzoom = $('#canvas').panzoom({
      // $zoomIn: $('#zoom-in'),
      // $zoomOut: $('#zoom-out'),
      $reset: $('#reset'),
      cursor: 'context-menu',
      startTransform: 'matrix(0.5, 0, 0, 0.5, -500, -700)', // FIXME:
    });

    $('#zoom-in').click(function (e) {
      e.clientX = 300;
      e.clientY = 200;
      $panzoom.panzoom('zoom', {
        // focal: e
      });
    });

    $('#zoom-out').click(function (e) {
      e.clientX = 300;
      e.clientY = 200;
      $panzoom.panzoom('zoom', 'zoomOut', {
        focal: e,
      });
    });

    bindingClickEventNode();
    showNodeData('GV_001', 'open');
    showNodeData('V_001', 'open');
    showNodeData('P_001', 'open');
    showNodeData('S_001', '100');
  </script>

  <script>
    // TODO: mapFormat 점검
    // TODO: sensor 위치 지정 효율적으로 생각
    // TODO: config 작업
  </script>
</body>

</html>