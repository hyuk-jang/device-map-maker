<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>6kw</title>
</head>

<body onclick="moustPoint()">
  <div id="canvas"></div>
</body>


<script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.5/svg.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
<script src="/mapSample/6kw 맵/jquery-1.10.2.min.js"></script>
<script src="/src/testSvg/testMap.js"></script>
<script>
  // 마우스 위치 값
  let mouseX = 0;
  let mouseY = 0;

  $(document).mousemove((e) => {
    mouseX = e.pageX;
    mouseY = e.pageY;
  });


  const moustPoint = () => {
    console.log("x: " + mouseX + ", y: " + mouseY);
  }
</script>

<script>
  //////////////////////////  시작  ///////////////////////////////////
  const bgWidth = map.drawInfo.frame.mapSize.width;
  const bgHeight = map.drawInfo.frame.mapSize.height;

  const canvas = SVG('canvas').size(3000, 1800);
  const background = canvas.rect(bgWidth, bgHeight).fill('#a99'); //FIXME: canvers 크기를 보기 위한것. 작업 후 삭제할 것!

  const svgDrawing = (id, x, y) => {
    //TODO: 간편하게 그리기 위한 메소드화 진행할 것..
    const svgModelResourceList = map.drawInfo.frame.svgModelResourceList;
    const svgModelResource = _.find(map.drawInfo.frame.svgModelResourceList, (m) => {
      return m.id == id;
    });
    const modelType = svgModelResource.type;
    console.log('type: ' + modelType)
    const width = svgModelResource.elementDrawInfo.width
    const height = svgModelResource.elementDrawInfo.height

    if (modelType == 'rect') {
      const model = canvas.rect(width, height).move(x, y);
    } else if (modelType == 'text') {
      //TODO: 
      console.log("pipe의 기본값을 설정해야 합니다.")
    } else if (modelType == 'circle') {
      const model = canvas.circle(svgModelResource.elementDrawInfo.radius).move(x, y);
    } else if (modelType == 'polygon') {
      const model = canvas.polygon('50,0 100,50 50,100 0,50').move(x, y)
    } else if (modelType == 'line') {
      const model = canvas.line(0, 0, 100, 150).stroke({
        width: 50,
        color: '#a55'
      })
    } else if (modelType == 'image') {
      const model = canvas.image(svgModelResource.elementDrawInfo.image)
      model.size(width, height).move(x, y)
    }

  }
  svgDrawing('moduleBlock_001', 160, 850);
  svgDrawing('moduleBlock_001', 160, 680);
  svgDrawing('moduleBlock_001', 160, 510);
  svgDrawing('moduleBlock_001', 160, 340);

  svgDrawing('moduleBlock_001', 160, 170);

  svgDrawing('salternBlock_001', 430, 300);
  svgDrawing('salternBlock_001', 430, 475);
  svgDrawing('salternBlock_001', 430, 655);
  svgDrawing('crystalBlock_001', 430, 830);

  svgDrawing('waterTank_001', 400, 100);
  svgDrawing('waterTank_001', 580, 100);
  svgDrawing('waterTank_001', 760, 100);

  svgDrawing('salternLine_001', 760, 100);
</script>

<script>
  // //텍스트
  // var draw = SVG('text').size(300, 130)
  // var text = draw.text("JB_HOME_TEST").move(120, 40).fill('#z00')
  // //사각형
  // var draw1 = SVG('rect').size(300, 130)
  // var rect = draw1.rect(100, 100).fill('#z00').move(20, 20)
  // //작은사각형
  // var draw1_2 = SVG('rect').size(300, 130)
  // var smailRect = draw1_2.rect(30, 30).fill('#z00').move(20, 20)
  // //원형
  // var draw2 = SVG('cicle').size(300, 130)
  // var cicle = draw2.circle(100).fill('#z00').move(20, 20)
  // //작은원형
  // var draw3 = SVG('smailCicle').size(300, 130)
  // var smailCicle = draw3.circle(30).fill('#z00').move(20, 20)
  // //마름모
  // var draw4 = SVG('polygon').size(300, 130)
  // var polygon = draw4.polygon('50,0 100,50 50,100 0,50')
  // polygon.fill('#z00').move(20, 20)
  // //라인
  // var draw5 = SVG('line').size(300, 100)
  // var line = draw5.line(0, 100, 100, 100).move(20, 20)
  // line.stroke({
  //   color: '#z00',
  //   width: 10,
  //   linecap: ''
  // })
  // //태양열모듈
  // var draw6 = SVG('pattern').size(300, 300)
  // var image = draw6.image('/src/testImage/testModule.jpg')
  // image.size(100, 100).move(20, 20)
  // // 저수지 or 바다
  // var draw7 = SVG('gradient').size(500, 130)
  // var linear = draw7.gradient('linear', function (stop) {
  //   stop.at(0, '#z00')
  //   stop.at(1, '#0f9')
  // })
  // draw.rect(100, 100).move(20, 20).radius(10).fill(linear)
  // var radial = draw7.gradient('radial', function (stop) {
  //   stop.at(0, '#0f9')
  //   stop.at(1, '#z00')
  // })
</script>

</html>